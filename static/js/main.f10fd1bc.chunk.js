(this.webpackJsonpmonosynth=this.webpackJsonpmonosynth||[]).push([[0],{11:function(e,t,a){e.exports={synthContainer:"styles_synthContainer__25COg",fixedFooter:"styles_fixedFooter__17TPe",lfoPad:"styles_lfoPad__14Teb",lfoPadMarker:"styles_lfoPadMarker__NNvwW",monosynth:"styles_monosynth__2UWkf",synthControls:"styles_synthControls__2a4uM",control:"styles_control__1qSDq",inlineControl:"styles_inlineControl__E3lmz",toneViz:"styles_toneViz__1Q9Jz",window:"styles_window__3FwCY",tonePath:"styles_tonePath__3_MqH",waveformPath:"styles_waveformPath__1jFzH",keyboardContainer:"styles_keyboardContainer__6MpAf",ribbonKeyboard:"styles_ribbonKeyboard__3uewh",activeMarker:"styles_activeMarker__G_3qO",keyboardLabel:"styles_keyboardLabel__2obi5"}},142:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(70),r=a.n(c),u=(a(142),a(10)),o=a(13),i=a(202),s=a(15),m=a.n(s),f=a(72),b=a(59),v=a(196),d=a(48),E=a(29);function h(e,t){return null===e&&null===t||null!==e&&(null!==t&&(e[0]===t[0]&&e[1]===t[1]))}var p={b:1,n:2,m:3,",":4,v:-1,c:-2,x:-3,z:-4},O=new Set(Object.keys(p)),j={1:["Db",3],q:["D",3],2:["Eb",3],w:["E",3],e:["F",3],4:["Gb",3],r:["G",3],5:["Ab",3],t:["A",3],6:["Bb",3],y:["B",3]," ":["C",4],7:["C#",4],u:["D",4],8:["D#",4],i:["E",4],o:["F",4],0:["F#",4],p:["G",4],"-":["G#",4],"[":["A",4],"=":["A#",4],"]":["B",4]};function g(e){var t=e.triggerAttack,a=e.triggerRelease,c=Object(n.useState)(null),r=Object(u.a)(c,2),o=r[0],i=r[1],s=Object(n.useState)(null),m=Object(u.a)(s,2),f=m[0],b=m[1],v=Object(n.useCallback)((function(e){var t=j[e.key];void 0===t||h(t,o)||i(t)," "===e.key&&e.preventDefault(),O.has(e.key)&&null===f&&b(e.key)}),[o,f]),d=Object(n.useCallback)((function(e){var t=j[e.key];t&&h(t,o)&&(a(),i(null)),f===e.key&&b(null)}),[a,o,f]);return Object(n.useEffect)((function(){if(o){var e=(f?p[f]:0)||0,a=[o[0],o[1]+e];t(a.join(""))}}),[o,t,f]),Object(n.useEffect)((function(){return document.addEventListener("keydown",v),document.addEventListener("keyup",d),function(){document.removeEventListener("keydown",v),document.removeEventListener("keyup",d)}}),[v,d]),l.a.createElement(l.a.Fragment,null)}var y=a(11),k=a.n(y),C=800,x=50,S=Math.pow(2,1/12),w=261.626,L=Object(d.a)().domain([-48,48]).range([0,C]).clamp(!0);function A(e){return Object(E.a)(9).map((function(t){return 12*(t-4)+e}))}var T,F=function(){return{textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"white",dy:"0.25em"}};function N(e){var t=e.triggerAttack,a=e.triggerRelease,c=e.onFrequencyChange,r=Object(n.useState)(!1),i=Object(u.a)(r,2),s=i[0],m=i[1],d=Object(n.useRef)(null),E=Object(n.useState)(null),h=Object(u.a)(E,2),p=h[0],O=h[1],j=Object(n.useCallback)((function(e){t(e),O(o.d(e).toFrequency())}),[t]),y=Object(n.useCallback)((function(){a(),O(null)}),[a]),N=Object(n.useCallback)((function(e){if(!d.current)return null;var t=d.current.getBoundingClientRect(),a=e.clientX-t.left;return function(e,t){return e*Math.pow(S,t)}(w,(a-400)/C*96)}),[]),_=Object(n.useCallback)((function(){m(!1)}),[]),R=Object(n.useCallback)((function(e){if(s){var t=N(e);null!==t&&(c(t),O(o.d(t).toFrequency()))}}),[s,N,c]),M=Object(n.useCallback)((function(e){m(!0);var t=N(e.nativeEvent);null!==t&&j(t)}),[j,N]);Object(n.useEffect)((function(){return s&&(document.addEventListener("mousemove",R),document.addEventListener("mouseup",_)),function(){document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",_)}}),[s,R,_]),Object(n.useEffect)((function(){s||y()}),[s,y]);var V=A(0).filter((function(e,t){return t%2===0})),B=A(0).filter((function(e,t){return t%2===1})),D=Object(n.useMemo)((function(){if(null!==p){var e=L((t=w,a=p,Math.log(a/t)/Math.log(S)));return void 0!==e?e:null}var t,a;return null}),[p]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("svg",{width:C+T.Left+T.Right,height:x+T.Top+T.Bottom,style:{userSelect:"none"},className:k.a.ribbonKeyboard},l.a.createElement(b.a,{left:T.Left,top:T.Top},l.a.createElement("text",{fill:"white",fontFamily:"Arial",fontSize:10,fontWeight:"bold",textAnchor:"middle",x:400,y:"-6px"},"Keyboard"),l.a.createElement("rect",{ref:d,width:C,height:x,style:{fill:"white"},onMouseDown:M}),l.a.createElement(f.a,{height:x,scale:L,stroke:"#bbb",strokeWidth:1,tickValues:B,lineStyle:{pointerEvents:"none"}}),l.a.createElement(f.a,{height:x,scale:L,stroke:"#666",strokeWidth:1,tickValues:V,lineStyle:{pointerEvents:"none"}}),l.a.createElement(v.a,{top:x,scale:L,tickValues:V,tickFormat:function(e){return"C".concat(Math.floor(e.valueOf()/12)+4)},tickLabelProps:F,tickLength:0,hideAxisLine:!0}),null!==D&&l.a.createElement("line",{x1:D,y1:0,x2:D,y2:x,strokeWidth:3,className:k.a.activeMarker}))),l.a.createElement(g,{triggerAttack:j,triggerRelease:y}))}!function(e){e[e.Top=16]="Top",e[e.Right=16]="Right",e[e.Left=16]="Left",e[e.Bottom=20]="Bottom"}(T||(T={}));var _=a(197),R=a(21),M=Object(i.a)(".0%"),V=Object(_.a)(R.a,[.5,8/15,9/16,.6,5/8,2/3,32/45,3/4,.8,5/6,8/9,15/16,1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,16/9,15/8,2]),B=Object(d.a)([-12,12],[0,1]),D=[{label:"Sine",value:"sine"},{label:"Triangle",value:"triangle"},{label:"Sawtooth",value:"sawtooth"},{label:"Square",value:"square"},{label:"Pulse",value:"pulse"}],q=[{label:"None",value:""},{label:"Frequency",value:"fm"},{label:"Amplitude",value:"am"},{label:"Fat",value:"fat"}];function P(e){var t=e.oscillator,a=Object(n.useState)(0),c=Object(u.a)(a,2),r=c[0],i=c[1],s=(r+1)/2;return Object(n.useEffect)((function(){t.width&&t.width.setValueAtTime(r,o.m())}),[r,t.width]),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Width",l.a.createElement("output",null,M(s))),l.a.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:s,onChange:function(e){return i(2*parseFloat(e.target.value)-1)}})))}function z(e){var t,a=e.oscillator,c=Object(n.useState)(0),r=Object(u.a)(c,2),s=r[0],m=r[1];return Object(n.useEffect)((function(){if(a.harmonicity){var e=function(e){return V(B(e))}(s);a.harmonicity.setValueAtTime(e,o.m())}}),[s,a.harmonicity]),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Harmonicity",l.a.createElement("output",null,(t=s,"".concat(Object(i.a)(".1f")(t)," st")))),l.a.createElement("input",{type:"range",min:"-12",max:"12",step:"0.1",value:s,onChange:function(e){return m(parseFloat(e.target.value))}})))}function W(e){var t=e.oscillator,a=Object(n.useState)(t.type),c=Object(u.a)(a,2),r=c[0],o=c[1],i=Object(n.useState)(""),s=Object(u.a)(i,2),m=s[0],f=s[1];return Object(n.useEffect)((function(){t.type="pulse"===r?"pulse":m+r}),[t,r,m]),l.a.createElement("form",{style:{textAlign:"center",width:300}},l.a.createElement("div",{className:k.a.inlineControl},l.a.createElement("label",null,l.a.createElement("span",null,"Type"),l.a.createElement("select",{name:"osc-type",value:r,onChange:function(e){return o(e.target.value)}},D.map((function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),"pulse"!==r&&l.a.createElement("div",{className:k.a.inlineControl},l.a.createElement("label",null,l.a.createElement("span",null,"Modulation"),l.a.createElement("select",{name:"osc-type",value:m,onChange:function(e){return f(e.target.value)}},q.map((function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),"pulse"===r&&l.a.createElement(P,{oscillator:t}),"pulse"!==r&&("fm"===m||"am"===m)&&l.a.createElement(z,{oscillator:t}))}var U=a(198),H=a(199),G=a(74);var I,Q=150,K=150;!function(e){e[e.Top=10]="Top",e[e.Right=10]="Right",e[e.Bottom=60]="Bottom",e[e.Left=60]="Left"}(I||(I={}));var J=Object(U.a)().domain([0,20]).range([0,Q]).clamp(!0),X=Object(d.a)().domain([1,0]).range([0,K]).clamp(!0),Y=function(){return{textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"white"}},$=function(){return{fontFamily:"Arial",fontSize:10,fill:"white",textAnchor:"end",dx:"-0.25em",dy:"0.25em"}};function Z(e){var t=e.lfo,a=e.leftAxisTickFormat,c=e.leftAxisLabel,r=t.frequency,i=t.amplitude,s=function(e){var t=Object(n.useState)((function(){return o.d(e.value).toFrequency()})),a=Object(u.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){var t=o.m();e.cancelScheduledValues(t),e.setValueAtTime(l,t)}),[l,e]),[l,c]}(r),m=Object(u.a)(s,2),d=m[0],E=m[1],h=function(e){var t=Object(n.useState)(e.value),a=Object(u.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){var t=o.m();e.cancelScheduledValues(t),e.setValueAtTime(l,t)}),[e,l]),[l,c]}(i),p=Object(u.a)(h,2),O=p[0],j=p[1],g=Object(n.useState)(!1),y=Object(u.a)(g,2),C=y[0],x=y[1],S=Object(n.useRef)(null),w={x:J(d),y:X(O)},L=Object(n.useCallback)((function(){x(!1)}),[]),A=Object(n.useCallback)((function(e){if(S.current){var t=S.current.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;E(J.invert(a)),j(X.invert(n))}}),[E,j]),T=Object(n.useCallback)((function(e){C&&A(e)}),[C,A]),F=Object(n.useCallback)((function(e){x(!0),A(e.nativeEvent)}),[A]);return Object(n.useEffect)((function(){return C&&(document.addEventListener("mousemove",T),document.addEventListener("mouseup",L)),function(){document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",L)}}),[C,T,L]),l.a.createElement("svg",{width:Q+I.Left+I.Right,height:K+I.Top+I.Bottom,onMouseDown:F,style:{userSelect:"none"}},l.a.createElement(b.a,{left:I.Left,top:I.Top},l.a.createElement("rect",{className:k.a.lfoPad,ref:S,width:Q,height:K,style:{cursor:"crosshair"}}),l.a.createElement("g",{style:{cursor:"crosshair"}},l.a.createElement(v.a,{top:K,scale:J,numTicks:5,tickLength:5,hideAxisLine:!0,stroke:"white",tickStroke:"white",tickLabelProps:Y,label:"Frequency",labelProps:{fill:"white",fontSize:10,textAnchor:"middle"}}),l.a.createElement(f.a,{height:K,scale:J,stroke:"#888",numTicks:5})),l.a.createElement("g",{style:{cursor:"crosshair"}},l.a.createElement(H.a,{left:0,scale:X,tickLength:5,tickValues:[0,.25,.5,.75,1],tickFormat:a,hideAxisLine:!0,stroke:"white",tickStroke:"white",tickLabelProps:$,label:c,labelProps:{fill:"white",fontSize:10,textAnchor:"middle"},labelOffset:25}),l.a.createElement(G.a,{width:Q,scale:X,stroke:"#a6a6a6",numTicks:4,tickValues:[0,.25,.5,.75,1]})),l.a.createElement("circle",{style:{pointerEvents:"none"},className:k.a.lfoPadMarker,cx:w.x,cy:w.y,r:5,strokeWidth:4,fill:"none"})))}var ee=a(9),te=a(1),ae=a(2),ne=a(6),le=a(5),ce=a(4),re=a(3),ue=function(e){Object(ce.a)(a,e);var t=Object(re.a)(a);function a(e){var n;Object(te.a)(this,a),(n=t.call(this,Object(ee.a)(Object(ee.a)({},e),{},{sustain:.5}))).name="PitchEnvelope",n.scale=void 0,n.fixedSustain=void 0;var l=e.min,c=e.max,r=e.fixedSustain;return n.fixedSustain=r,n.scale=n.output=new o.i({context:n.context,min:l,max:c}),n._sig.connect(n.scale),n.updateSustain(),n}return Object(ae.a)(a,[{key:"updateSustain",value:function(){if(this.fixedSustain<this.min||this.fixedSustain>this.max)throw new Error("ValueError: Fixed value '".concat(this.fixedSustain,"' is outside of bounds (").concat(this.min,", ").concat(this.max,")."));var e=this.max-this.min;this.sustain=0!==e?(this.fixedSustain-this.min)/(this.max-this.min):this.fixedSustain}},{key:"dispose",value:function(){return Object(ne.a)(Object(le.a)(a.prototype),"dispose",this).call(this),this.scale.dispose(),this}},{key:"min",get:function(){return this.scale.min},set:function(e){if(e>this.max)throw new Error("Cannot set ScaledEnvelope min value to '".concat(e,"', since it is greater than the max value '").concat(this.max,"'"));this.scale.min=e,this.updateSustain()}},{key:"max",get:function(){return this.scale.max},set:function(e){if(e<this.min)throw new Error("Cannot set ScaledEnvelope max value to '".concat(e,"', since it is less than the max value '").concat(this.min,"'"));this.scale.max=e,this.updateSustain()}}]),a}(o.a),oe=a(200),ie=a(23);function se(e){var t=e.scale,a=e.value,n=e.min,c=e.max,r=e.onUpdate,u=Object(ie.a)(e,["scale","value","min","max","onUpdate"]);return l.a.createElement("input",Object.assign({},u,{type:"range",min:t.invert(n),max:t.invert(c),value:t.invert(a),onChange:function(e){var a=t(parseFloat(e.target.value));void 0!==a&&r(a)}}))}var me=Object(oe.a)([0,5e3],[0,5e3]).exponent(2),fe=Object(i.a)(",d"),be=Object(i.a)(".2f"),ve=[{name:"Low-pass",value:"lowpass"},{name:"High-pass",value:"highpass"},{name:"Band-pass",value:"bandpass"},{name:"All-pass",value:"allpass"},{name:"Low-shelf",value:"lowshelf"},{name:"High-shelf",value:"highshelf"},{name:"Notch",value:"notch"},{name:"Peaking",value:"peaking"}],de=new Set(["lowshelf","highshelf","peaking"]);function Ee(e){var t=e.filterEnvelope,a=e.filter,c=Object(n.useState)("lowpass"),r=Object(u.a)(c,2),i=r[0],s=r[1],m=Object(n.useState)(o.d(t.baseFrequency).toFrequency()),f=Object(u.a)(m,2),b=f[0],v=f[1],d=Object(n.useState)(1),E=Object(u.a)(d,2),h=E[0],p=E[1],O=Object(n.useState)(0),j=Object(u.a)(O,2),g=j[0],y=j[1];return Object(n.useEffect)((function(){t.baseFrequency=b}),[b,t]),Object(n.useEffect)((function(){var e=o.m();a.Q.cancelScheduledValues(e),a.Q.setValueAtTime(h,e)}),[h,a.Q]),Object(n.useEffect)((function(){var e=o.m();a.gain.cancelScheduledValues(e),a.gain.setValueAtTime(g,e)}),[g,a]),Object(n.useEffect)((function(){a.type=i}),[i,a]),l.a.createElement("form",{style:{textAlign:"center"}},l.a.createElement("div",{className:k.a.inlineControl},l.a.createElement("label",null,"Type",l.a.createElement("select",{name:"filter-type",value:i,onChange:function(e){return s(e.target.value)}},ve.map((function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.name)}))))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Frequency",l.a.createElement("output",null,fe(b)," Hz")),l.a.createElement(se,{scale:me,min:0,max:1e4,step:.5,value:b,onUpdate:v}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Quality",l.a.createElement("output",null,be(h))),l.a.createElement(se,{type:"range",min:.01,max:50,step:.01,scale:Object(oe.a)([.01,50],[.01,50]).exponent(2),value:h,onUpdate:p}))),de.has(i)&&l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Gain",l.a.createElement("output",null,g)),l.a.createElement("input",{type:"range",min:"-25",max:"25",step:"0.1",value:g,onChange:function(e){return y(parseFloat(e.target.value))}}))))}var he;!function(e){e[e.Left=12.5]="Left",e[e.Top=10]="Top"}(he||(he={}));var pe,Oe=[0,1];function je(e){var t=e.contextRecorder,a=e.recordDuration,c=e.bounds,r=void 0===c?Oe:c,i=e.sampleRate,s=void 0===i?48e3:i,m=Object(n.useState)({status:"pending"}),f=Object(u.a)(m,2),v=f[0],h=f[1],p=Object(n.useCallback)((function(){o.g((function(e){t(e)}),a,1,s).then((function(e){h({status:"ready",value:e})})).catch((function(){h({status:"error",error:"Error creating buffer."})}))}),[t,a,s]);Object(n.useEffect)((function(){p()}),[p]);var O=Object(n.useMemo)((function(){return"ready"!==v.status?null:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(d.a)(),c=e.get();if(!c)return null;var r=c.getChannelData(0),u=c.length,o=Object(E.a)(0,u,Math.ceil(u/n)).map((function(e){var n=r[e];return"L ".concat(e/u*t," ").concat(l(n)*a)}));return o[0]=o[0].replace("L","M"),o.join(" ")}(v.value,275,80,Math.min(500,s*a),Object(d.a)([r[0],r[1]],[0,1]))}),[v,r,s,a]);return l.a.createElement("svg",{width:300+pe.Left+pe.Right,height:100+pe.Top+pe.Bottom,className:k.a.toneViz},l.a.createElement(b.a,{left:pe.Left,top:pe.Top},l.a.createElement("rect",{className:k.a.window,width:300,height:100}),l.a.createElement(b.a,{transform:"\n            translate(".concat(he.Left,", ").concat(he.Top+80,")\n            scale(1, -1)\n          ")},O&&l.a.createElement("path",{d:O,className:k.a.tonePath}))))}!function(e){e[e.Top=0]="Top",e[e.Right=0]="Right",e[e.Bottom=0]="Bottom",e[e.Left=0]="Left"}(pe||(pe={}));var ge=[{label:"Linear",value:"linear"},{label:"Exponential",value:"exponential"}],ye=[{label:"Linear",value:"linear"},{label:"Exponential",value:"exponential"},{label:"Sine",value:"sine"},{label:"Cosine",value:"cosine"},{label:"Bounce",value:"bounce"},{label:"Ripple",value:"ripple"},{label:"Step",value:"step"}];function ke(e){var t=e.attackCurve,a=e.onAttackCurveChange,l=e.decayCurve,c=e.onDecayCurveChange,r=e.releaseCurve,u=e.onReleaseCurveChange;return n.createElement(n.Fragment,null,n.createElement("div",{className:k.a.inlineControl},n.createElement("label",null,"Attack Curve",n.createElement("select",{name:"attack-curve",value:t,onChange:function(e){return a(e.target.value)}},ye.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))))),n.createElement("div",{className:k.a.inlineControl},n.createElement("label",null,"Decay Curve",n.createElement("select",{name:"decay-curve",value:l,onChange:function(e){return c(e.target.value)}},ge.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))))),n.createElement("div",{className:k.a.inlineControl},n.createElement("label",null,"Release Curve",n.createElement("select",{name:"release-curve",value:r,onChange:function(e){return u(e.target.value)}},ye.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))))))}var Ce=Object(oe.a)().exponent(2).domain([0,4]).range([0,4]),xe=Object(i.a)(".2f"),Se=Object(i.a)(".1%");function we(e){var t=e.envelope,a=Object(n.useState)((function(){return o.j(t.attack).toSeconds()+o.j(t.decay).toSeconds()})),c=Object(u.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)((function(){var e=o.j(t.attack).toSeconds();return e/(e+o.j(t.decay).toSeconds())})),m=Object(u.a)(s,2),f=m[0],b=m[1],v=Object(n.useState)(t.sustain),d=Object(u.a)(v,2),E=d[0],h=d[1],p=Object(n.useState)((function(){return o.j(t.release).toSeconds()})),O=Object(u.a)(p,2),j=O[0],g=O[1],y=Object(n.useState)(t.attackCurve),C=Object(u.a)(y,2),x=C[0],S=C[1],w=Object(n.useState)(t.decayCurve),L=Object(u.a)(w,2),A=L[0],T=L[1],F=Object(n.useState)(t.releaseCurve),N=Object(u.a)(F,2),_=N[0],R=N[1],M=Object(n.useCallback)((function(e){new o.a({context:e,attack:f*r,decay:(1-f)*r,sustain:E,release:j,attackCurve:x,decayCurve:A,releaseCurve:_}).toDestination().triggerAttackRelease(r+.5)}),[f,r,E,j,x,A,_]);return Object(n.useEffect)((function(){t.attack=r*f,t.decay=r*(1-f)}),[t,r,f]),Object(n.useEffect)((function(){t.sustain=E}),[t,E]),Object(n.useEffect)((function(){t.release=j}),[t,j]),Object(n.useEffect)((function(){t.attackCurve=x,t.decayCurve=A,t.releaseCurve=_}),[t,x,A,_]),l.a.createElement("div",null,l.a.createElement(je,{contextRecorder:M,recordDuration:8.5,sampleRate:3e3}),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Onset",l.a.createElement("output",null,xe(r),"s")),l.a.createElement(se,{scale:Ce,min:.01,max:4,step:"0.01",value:r,onUpdate:i}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Attack-Decay Split",l.a.createElement("output",null,Se(f))),l.a.createElement("input",{type:"range",min:0,max:.999,step:"0.001",value:f,onChange:function(e){return b(parseFloat(e.target.value))}}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Sustain",l.a.createElement("output",null,Se(E))),l.a.createElement("input",{type:"range",min:0,max:1,step:"0.01",value:E,onChange:function(e){return h(parseFloat(e.target.value))}}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Release",l.a.createElement("output",null,xe(j),"s")),l.a.createElement("input",{type:"range",min:.01,max:4,step:"0.1",value:j,onChange:function(e){return g(parseFloat(e.target.value))}}))),l.a.createElement(ke,{attackCurve:x,onAttackCurveChange:S,decayCurve:A,onDecayCurveChange:T,releaseCurve:_,onReleaseCurveChange:R}))}var Le=Object(oe.a)().exponent(2).domain([0,4]).range([0,4]),Ae=Object(i.a)(".2f"),Te=Object(i.a)(".1%"),Fe=[-2400,2400];function Ne(e){var t=e.envelope,a=e.min,c=e.minLabel,r=e.formatMin,i=e.max,s=e.maxLabel,m=e.formatMax,f=e.step,b=Object(n.useState)((function(){return o.j(t.attack).toSeconds()+o.j(t.decay).toSeconds()})),v=Object(u.a)(b,2),d=v[0],E=v[1],h=Object(n.useState)((function(){var e=o.j(t.attack).toSeconds();return e/(e+o.j(t.decay).toSeconds())})),p=Object(u.a)(h,2),O=p[0],j=p[1],g=Object(n.useState)(t.min),y=Object(u.a)(g,2),C=y[0],x=y[1],S=Object(n.useState)(t.max),w=Object(u.a)(S,2),L=w[0],A=w[1],T=Object(n.useState)((function(){return o.j(t.release).toSeconds()})),F=Object(u.a)(T,2),N=F[0],_=F[1],R=Object(n.useState)(t.attackCurve),M=Object(u.a)(R,2),V=M[0],B=M[1],D=Object(n.useState)(t.decayCurve),q=Object(u.a)(D,2),P=q[0],z=q[1],W=Object(n.useState)(t.releaseCurve),U=Object(u.a)(W,2),H=U[0],G=U[1],I=Object(n.useCallback)((function(e){new ue({context:e,attack:O*d,decay:(1-O)*d,release:N,attackCurve:V,decayCurve:P,releaseCurve:H,min:C,max:L,fixedSustain:0}).toDestination().triggerAttackRelease(d+.5)}),[O,d,N,V,P,H,C,L]);return Object(n.useEffect)((function(){t.attack=d*O,t.decay=d*(1-O)}),[t,d,O]),Object(n.useEffect)((function(){t.min=C}),[t,C]),Object(n.useEffect)((function(){t.max=L}),[t,L]),Object(n.useEffect)((function(){t.release=N}),[t,N]),Object(n.useEffect)((function(){t.attackCurve=V,t.decayCurve=P,t.releaseCurve=H}),[t,V,P,H]),l.a.createElement("div",null,l.a.createElement(je,{contextRecorder:I,recordDuration:8.5,bounds:Fe,sampleRate:3e3}),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Onset",l.a.createElement("output",null,Ae(d),"s")),l.a.createElement(se,{scale:Le,min:.01,max:4,step:"0.01",value:d,onUpdate:E}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Attack-Decay Split",l.a.createElement("output",null,Te(O))),l.a.createElement("input",{type:"range",min:0,max:.999,step:"0.001",value:O,onChange:function(e){return j(parseFloat(e.target.value))}}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,c,l.a.createElement("output",null,r(C))),l.a.createElement("input",{type:"range",min:a,max:t.fixedSustain,step:f,value:C,onChange:function(e){return x(parseFloat(e.target.value))}}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,s,l.a.createElement("output",null,m(L))),l.a.createElement("input",{type:"range",min:t.fixedSustain,max:i,step:f,value:L,onChange:function(e){return A(parseFloat(e.target.value))}}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Release",l.a.createElement("output",null,Ae(N),"s")),l.a.createElement("input",{type:"range",min:.01,max:4,step:"0.1",value:N,onChange:function(e){return _(parseFloat(e.target.value))}}))),l.a.createElement(ke,{attackCurve:V,onAttackCurveChange:B,decayCurve:P,onDecayCurveChange:z,releaseCurve:H,onReleaseCurveChange:G}))}var _e,Re,Me=a(201);!function(e){e[e.Top=10]="Top",e[e.Right=12.5]="Right",e[e.Bottom=10]="Bottom",e[e.Left=40]="Left"}(_e||(_e={})),function(e){e[e.Top=0]="Top",e[e.Right=0]="Right",e[e.Bottom=0]="Bottom",e[e.Left=0]="Left"}(Re||(Re={}));var Ve,Be,De=200,qe=400+_e.Left+_e.Right,Pe=De+_e.Top+_e.Bottom,ze=Object(U.a)([0,2e4],[0,400]).constant(100),We=Object(i.a)(".2s"),Ue=Object(d.a)([-100,0],[0,De]),He=Object(d.a)([Ue.domain()[1],Ue.domain()[0]],Ue.range()),Ge=[75,250,750,2500,7500,2e4];function Ie(e){var t=e.meter,a=Object(n.useState)(new Float32Array),c=Object(u.a)(a,2),r=c[0],o=c[1],i=Object(n.useMemo)((function(){return Object(E.a)(0,r.length).map((function(e){var a=r[e],n=0===e?"M":"L",l=t.getFrequencyOfIndex(e);return"".concat(n," ").concat(ze(l)," ").concat(Ue(a))})).join(" ")}),[r,t]);return Object(n.useEffect)((function(){var e=setInterval((function(){return o(t.getValue())}),16);return function(){return clearInterval(e)}}),[t]),l.a.createElement("svg",{width:qe+Re.Left+Re.Right,height:Pe+Re.Top+Re.Bottom,className:k.a.toneViz},l.a.createElement(b.a,{left:Re.Left,top:Re.Top},l.a.createElement("rect",{className:k.a.window,width:qe,height:Pe}),l.a.createElement(b.a,{left:_e.Left,top:_e.Top},l.a.createElement(Me.a,{xScale:ze,yScale:He,columnTickValues:Ge,width:400,height:De}),l.a.createElement(v.a,{scale:ze,top:100,tickValues:Ge,tickLength:0,tickFormat:We,label:"Hz"}),l.a.createElement(H.a,{scale:He,tickLength:0,label:"db",labelOffset:27}),l.a.createElement(b.a,{transform:"translate(0, ".concat(De,") scale(1, -1)")},i&&l.a.createElement("path",{d:i,className:k.a.tonePath})))))}!function(e){e[e.Top=10]="Top",e[e.Right=12.5]="Right",e[e.Bottom=10]="Bottom",e[e.Left=40]="Left"}(Ve||(Ve={})),function(e){e[e.Top=0]="Top",e[e.Right=0]="Right",e[e.Bottom=0]="Bottom",e[e.Left=0]="Left"}(Be||(Be={}));var Qe=400,Ke=200,Je=Qe+Ve.Left+Ve.Right,Xe=Ke+Ve.Top+Ve.Bottom,Ye=Object(d.a)([-1,1],[0,Ke]),$e=Ye.copy().range([Ke,0]),Ze=Object(i.a)(".0%"),et=[-1,-.75,-.5,-.25,0,.25,.5,.75,1];function tt(e){var t=e.meter,a=Object(n.useState)(new Float32Array),c=Object(u.a)(a,2),r=c[0],o=c[1],i=Object(n.useMemo)((function(){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=!1,n=[],l=0;l<e.length;l++)l>0&&e[l-1]<t&&e[l]>=t&&(a||(a=!0),n.push(l));return a?1===n.length&&n.push(e.length):n=[0,e.length],n}(r,0)}),[r]),s=Object(n.useState)(0),m=Object(u.a)(s,2),f=m[0],v=m[1];Object(n.useLayoutEffect)((function(){v((function(e){return 1===i.length-e?e:i.length}))}),[i,f]);var h=Object(n.useMemo)((function(){var e=i[0],t=i[f-1]-e,a=Object(d.a)([0,t],[0,Qe]);return Object(E.a)(0,t).map((function(t){var n=r[t+e];return"".concat(0===t?"M":"L"," ").concat(a(t)," ").concat(Ye(n))})).join(" ")}),[r,f,i]);return Object(n.useEffect)((function(){var e=setInterval((function(){return o(new Float32Array(t.getValue()))}),16);return function(){return clearInterval(e)}}),[t]),l.a.createElement("svg",{width:Je+Be.Left+Be.Right,height:Xe+Be.Top+Be.Bottom,className:k.a.toneViz},l.a.createElement(b.a,{left:Be.Left,top:Be.Top},l.a.createElement("rect",{className:k.a.window,width:Je,height:Xe}),l.a.createElement(b.a,{left:Ve.Left,top:Ve.Top},l.a.createElement(H.a,{scale:$e,tickFormat:Ze,tickValues:et,tickLength:0}),l.a.createElement(G.a,{scale:$e,tickValues:et,width:Qe}),l.a.createElement("line",{x1:0,y1:100,x2:Qe,y2:100,stroke:"gray"}),l.a.createElement(b.a,{transform:"translate(0, ".concat(Ke,") scale(1, -1)")},h&&l.a.createElement("path",{d:h,className:k.a.waveformPath})))))}function at(e){var t=e.subOscEnabled,a=e.subSubOscEnabled,c=e.onSubOscEnabledChange,r=e.onSubSubOscEnabledChange,u=Object(n.useCallback)((function(){c(!t)}),[t,c]),o=Object(n.useCallback)((function(e){r(!a)}),[a,r]);return l.a.createElement("form",{style:{textAlign:"center",width:300}},l.a.createElement("div",{className:k.a.inlineControl},l.a.createElement("label",null,"1x",l.a.createElement("input",{type:"checkbox",name:"sub-osc",checked:t,onChange:u})),l.a.createElement("label",null,"2x",l.a.createElement("input",{type:"checkbox",name:"sub-sub-osc",checked:a,onChange:o}))))}var nt=Object(oe.a)().exponent(2).domain([0,1]).range([0,1]),lt=Object(oe.a)().exponent(2).domain([0,1]).range([0,1]),ct=Object(i.a)(".2f"),rt=Object(i.a)(".0%");function ut(e){var t=e.delayNode,a=e.disabled,c=e.onDisabledChange,r=Object(n.useState)(.2),i=Object(u.a)(r,2),s=i[0],m=i[1],f=Object(n.useState)(.2),b=Object(u.a)(f,2),v=b[0],d=b[1];return Object(n.useEffect)((function(){var e=o.m();t.delayTime.setValueAtTime(s,e)}),[s,t.delayTime]),Object(n.useEffect)((function(){var e=o.m();t.feedback.setValueAtTime(v,e)}),[v,t.feedback]),l.a.createElement("form",{style:{textAlign:"center",width:300}},l.a.createElement("div",{className:k.a.inlineControl},l.a.createElement("label",null,l.a.createElement("span",null,"Enabled"),l.a.createElement("input",{type:"checkbox",onChange:function(e){return c(!e.target.checked)},checked:!a}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Delay Time",l.a.createElement("output",null,ct(s),"s")),l.a.createElement(se,{scale:nt,min:0,max:1,step:"0.01",value:s,onUpdate:m,disabled:a}))),l.a.createElement("div",{className:k.a.control},l.a.createElement("label",null,l.a.createElement("span",null,"Feedback",l.a.createElement("output",null,rt(v))),l.a.createElement(se,{scale:lt,min:0,max:.99,step:"0.01",value:v,onUpdate:d,disabled:a}))))}o.l.lookAhead=0;var ot=Object(i.a)("+"),it=Object(i.a)(".1f");function st(){var e=Object(n.useMemo)((function(){return(new o.f).toDestination()}),[]),t=Object(n.useMemo)((function(){return new o.b(1024)}),[]),a=Object(n.useMemo)((function(){return new o.k(2048)}),[]),c=Object(n.useMemo)((function(){return new o.h({type:"sine",context:e.context})}),[e.context]),r=Object(n.useState)(!1),i=Object(u.a)(r,2),s=i[0],f=i[1],b=Object(n.useMemo)((function(){return new o.h({type:"sine",context:e.context})}),[e.context]),v=Object(n.useState)(!1),d=Object(u.a)(v,2),E=d[0],h=d[1],p=Object(n.useMemo)((function(){return new o.c}),[]),O=Object(n.useState)(!0),j=Object(u.a)(O,2),g=j[0],y=j[1],C=Object(n.useMemo)((function(){return new o.e({amplitude:0,max:1200,min:-1200})}),[]),x=Object(n.useMemo)((function(){return new ue({min:-1200,max:1200,fixedSustain:0})}),[]),S=Object(n.useCallback)((function(t){var a=e.now();e.triggerAttack(t,a),x.triggerAttack(a);var n=o.d(t).toFrequency();c.frequency.setValueAtTime(n/2,a),c.start(a),b.frequency.setValueAtTime(n/4,a),b.start(a)}),[e,c,b,x]),w=Object(n.useCallback)((function(){e.triggerRelease(),c.stop(),b.stop(),x.triggerRelease()}),[e,c,b,x]),L=Object(n.useCallback)((function(t){var a=o.m();e.oscillator.frequency.setValueAtTime(t,a),c.frequency.setValueAtTime(t/2,a),b.frequency.setValueAtTime(t/4,a)}),[e.oscillator,c,b]),A=Object(n.useCallback)((function(e){return"".concat(it(e/100)," st")}),[]);return Object(n.useLayoutEffect)((function(){return C.connect(e.detune).start(),function(){C.stop().disconnect()}}),[C,e.detune]),Object(n.useLayoutEffect)((function(){return x.connect(e.detune),function(){x.disconnect()}}),[x,e.detune]),Object(n.useLayoutEffect)((function(){return e.connect(t),e.connect(a),g?e.toDestination():e.chain(p,e.context.destination),s&&c.connect(e.filter),E&&b.connect(e.filter),function(){c.disconnect(),b.disconnect(),e.disconnect(),e.toDestination()}}),[e,p,g,t,a,c,b,s,E]),l.a.createElement("div",{className:k.a.synthContainer},l.a.createElement("div",{className:m()(k.a.keyboardContainer,k.a.fixedFooter)},l.a.createElement(N,{onFrequencyChange:L,triggerAttack:S,triggerRelease:w})),l.a.createElement("div",{className:k.a.synthControls},l.a.createElement("div",null,l.a.createElement("header",null,"Spectrum Analyzer"),l.a.createElement(Ie,{meter:t})),l.a.createElement("div",null,l.a.createElement("header",null,"Waveform Analyzer"),l.a.createElement(tt,{meter:a}))),l.a.createElement("div",{className:k.a.synthControls},l.a.createElement("div",{style:{width:300}},l.a.createElement("header",null,"Oscillator"),l.a.createElement(W,{oscillator:e.oscillator}),l.a.createElement(at,{subOscEnabled:s,subSubOscEnabled:E,onSubOscEnabledChange:f,onSubSubOscEnabledChange:h})),l.a.createElement("div",{style:{width:300}},l.a.createElement("header",null,"Filter"),l.a.createElement(Ee,{filterEnvelope:e.filterEnvelope,filter:e.filter})),l.a.createElement("div",null,l.a.createElement("header",null,"LFO"),l.a.createElement(Z,{lfo:C,leftAxisTickFormat:function(e){return ot(12*e.valueOf())},leftAxisLabel:"Pitch"})),l.a.createElement("div",{style:{width:300}},l.a.createElement("header",null,"Delay"),l.a.createElement(ut,{delayNode:p,disabled:g,onDisabledChange:y}))),l.a.createElement("div",{className:k.a.synthControls},l.a.createElement("div",null,l.a.createElement("header",null,"Amplitude Envelope"),l.a.createElement(we,{envelope:e.envelope})),l.a.createElement("div",null,l.a.createElement("header",null,"Pitch Envelope"),l.a.createElement(Ne,{envelope:x,min:-2400,minLabel:"Detune Min",formatMin:A,max:2400,maxLabel:"Detune Max",formatMax:A,step:10})),l.a.createElement("div",null,l.a.createElement("header",null,"Filter Envelope"),l.a.createElement(we,{envelope:e.filterEnvelope}))))}a(194);var mt=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1];return l.a.createElement("div",{className:"App"},l.a.createElement("main",{className:"container"},a?l.a.createElement(st,null):l.a.createElement("div",null,l.a.createElement("h1",null,"Digital Monosynth"),l.a.createElement("button",{className:"start-btn",onClick:function(){c(!0),o.n()}},"Start"),l.a.createElement("h5",null,"Warning: only Chrome is supported"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(mt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[195,1,2]]]);
//# sourceMappingURL=main.f10fd1bc.chunk.js.map